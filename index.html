<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SPYNEL KOUTON | Creative Technologist</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- GSAP for smooth animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* DARK MODE (Default) */
            --bg-deep: #0A0806;
            --text-main: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.4);
            --neon-cyan: #C4A77D;
            --neon-lime: #E5D3B3;
            --font-hero: 'Syncopate', sans-serif;
            --font-tech: 'Space Mono', monospace;

            /* LIGHT MODE */
            --bg-light: #E6E8EC;
            --text-light: #1A1A20;
            --text-light-dim: rgba(0, 0, 0, 0.5);
            --accent-light: #2A2A35;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-deep);
            color: var(--text-main);
            overflow: hidden;
            cursor: none;
            touch-action: none;
            transition: background-color 1.5s cubic-bezier(0.4, 0, 0.2, 1), color 1.5s ease;
        }

        /* --- LIGHT MODE OVERRIDES --- */
        body.light-mode {
            background-color: var(--bg-light);
            color: var(--text-light);
        }

        .ui-text-dim {
            color: var(--text-dim);
            transition: color 1s ease;
        }

        body.light-mode .ui-text-dim {
            color: var(--text-light-dim);
        }

        .ui-text-accent {
            color: var(--neon-cyan);
            transition: color 1s ease;
        }

        body.light-mode .ui-text-accent {
            color: #8C7B6D;
            font-weight: bold;
        }

        body.light-mode .hero-title {
            color: var(--text-light);
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            mix-blend-mode: multiply;
        }

        body.light-mode .hero-title:hover {
            color: #000;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }

        body.light-mode .hud-nav {
            background: rgba(255, 255, 255, 0.6);
            border-color: rgba(0, 0, 0, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }

        body.light-mode .hud-btn {
            color: #444;
        }

        body.light-mode .hud-btn:hover {
            color: #000;
            border-color: #000;
        }

        body.light-mode .hud-btn.active {
            background-color: #333;
            color: white;
        }

        body.light-mode #custom-cursor {
            border-color: #111;
            background-color: rgba(0, 0, 0, 0.05);
            mix-blend-mode: normal;
        }

        body.light-mode .tech-ring {
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.light-mode .ring-inner {
            border-color: rgba(0, 0, 0, 0.3);
        }

        body.light-mode .hero-subtitle {
            color: #555;
            font-weight: bold;
        }

        body.light-mode .layer-base {
            border-color: #333;
        }

        /* Light Mode Projects */
        body.light-mode .project-title {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            color: #fff;
        }

        body.light-mode .project-number {
            -webkit-text-stroke: 2px rgba(255, 255, 255, 0.5);
        }

        body.light-mode .project-overlay-gradient {
            background: linear-gradient(to top, rgba(200, 200, 205, 0.9), transparent);
        }

        body.light-mode .project-desc {
            color: #333;
            font-weight: 500;
        }

        /* Light Mode Nav Arrows */
        body.light-mode .nav-arrow {
            border-color: rgba(0, 0, 0, 0.2);
            color: #333;
            background: rgba(255, 255, 255, 0.5);
        }

        body.light-mode .nav-arrow:hover {
            background: #8C7B6D;
            color: white;
            border-color: #8C7B6D;
        }

        body.light-mode .scroll-indicator {
            color: #555;
        }

        /* Light Mode Detail Modal */
        body.light-mode .detail-content {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.1);
            color: #111;
        }

        body.light-mode .detail-title {
            color: #111;
        }

        body.light-mode .close-detail {
            color: #111;
            border-color: #ccc;
        }

        /* --- PROJECT DETAIL LAYER (FULL SCREEN CAROUSEL) --- */
        #project-detail-layer {
            flex-direction: row;
            overflow-x: scroll;
            overflow-y: hidden;
            justify-content: flex-start;
            align-items: center;
            padding: 0;
            gap: 4px;
            /* Spacing between images */
            scrollbar-width: none;
            -ms-overflow-style: none;
            white-space: nowrap;
            height: 100%;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            background: #000;
            z-index: 60;
            /* Above projects layer */
        }

        #project-detail-layer::-webkit-scrollbar {
            display: none;
        }

        .detail-slide {
            display: inline-flex;
            flex: 0 0 auto;
            /* Allow auto width based on content */
            width: auto;
            /* Allow auto width based on content */
            height: 100vh;
            position: relative;
            scroll-snap-align: start;
            overflow: hidden;
            justify-content: center;
            align-items: center;
            background: #050505;
        }

        .detail-slide img {
            width: auto;
            /* Auto width to maintain aspect ratio */
            height: 100%;
            /* Full height */
            object-fit: contain;
            /* Ensure full image is visible */
            /* object-fit: cover;  Alternatively, cover to fill screen */
        }

        /* Next Project Card */
        .next-project-card {
            flex: 0 0 100vw;
            /* Keep this full screen */
            width: 100vw;
            flex-direction: column;
            background: #111;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .next-project-card:hover {
            background: #1a1a1a;
        }

        .next-project-card h2 {
            font-family: var(--font-hero);
            font-size: 4rem;
            color: var(--neon-cyan);
            margin-bottom: 1rem;
            text-align: center;
        }

        .next-project-card p {
            font-family: var(--font-tech);
            color: #888;
            font-size: 1.2rem;
        }

        /* Back Button */
        #back-to-projects-btn {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 70;
            font-family: var(--font-tech);
            color: white;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
            /* Hidden by default */
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }

        #back-to-projects-btn:hover {
            background: var(--neon-cyan);
            color: black;
            border-color: var(--neon-cyan);
        }

        /* --- UI LAYERS --- */
        .full-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease-out;
        }

        .full-layer.active {
            pointer-events: auto;
        }

        .full-layer.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .full-layer.hidden {
            display: none;
        }

        .full-layer.blurred {
            opacity: 0.2;
            filter: blur(5px);
            pointer-events: none;
        }

        /* Home Layer Specifics */
        #home-layer {
            padding-bottom: 2rem;
        }

        @media (max-width: 768px) {
            #home-layer {
                padding-bottom: 0;
                padding-top: 5vh;
            }
        }

        /* --- PROJECTS LAYER (FULL SCREEN INFINITE SCROLL) --- */
        #projects-layer {
            flex-direction: row;
            overflow-x: scroll;
            overflow-y: hidden;
            justify-content: flex-start;
            align-items: center;
            padding: 0;
            gap: 0;
            scrollbar-width: none;
            -ms-overflow-style: none;
            white-space: nowrap;
            height: 100%;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
        }

        #projects-layer::-webkit-scrollbar {
            display: none;
        }

        /* PROJECT NAVIGATION CONTROLS */
        #project-controls {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #project-controls.active {
            opacity: 1;
        }

        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: var(--font-tech);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            pointer-events: auto;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }

        .nav-arrow:hover {
            background: var(--neon-cyan);
            color: black;
            border-color: var(--neon-cyan);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-arrow.left {
            left: 2rem;
        }

        .nav-arrow.right {
            right: 2rem;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 6rem;
            left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-tech);
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            animation: pulse 2s infinite;
        }

        .mouse-icon {
            width: 20px;
            height: 30px;
            border: 1px solid currentColor;
            border-radius: 10px;
            position: relative;
        }

        .mouse-icon::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 6px;
            background: currentColor;
            border-radius: 2px;
            animation: scrollLine 1.5s infinite;
        }

        @keyframes scrollLine {
            0% {
                top: 5px;
                opacity: 1;
            }

            100% {
                top: 15px;
                opacity: 0;
            }
        }

        /* FULL SCREEN PROJECT CARD */
        .project-card {
            display: inline-flex;
            flex: 0 0 100vw;
            /* Full Width */
            width: 100vw;
            height: 100vh;
            /* Full Height */
            position: relative;
            scroll-snap-align: start;
            overflow: hidden;
            background: #000;
        }

        .project-bg-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.6;
            transition: transform 1s ease, opacity 0.5s ease;
            z-index: 1;
        }

        .project-card:hover .project-bg-img {
            transform: scale(1.05);
            opacity: 0.8;
        }

        .project-overlay-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(10, 8, 6, 1) 0%, rgba(10, 8, 6, 0.6) 30%, rgba(10, 8, 6, 0.2) 100%);
            z-index: 2;
        }

        .project-content-wrapper {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 4rem 6rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: flex-start;
            z-index: 10;
            white-space: normal;
            pointer-events: none;
        }

        .project-number {
            position: absolute;
            top: 10vh;
            right: 5vw;
            font-family: var(--font-hero);
            font-size: 20vh;
            font-weight: 700;
            color: transparent;
            -webkit-text-stroke: 2px rgba(255, 255, 255, 0.1);
            z-index: 3;
            pointer-events: none;
            line-height: 1;
        }

        .project-type-pill {
            padding: 0.5rem 1rem;
            border: 1px solid var(--neon-cyan);
            border-radius: 50px;
            color: var(--neon-cyan);
            font-family: var(--font-tech);
            font-size: 0.8rem;
            margin-bottom: 1.5rem;
            backdrop-filter: blur(5px);
            background: rgba(0, 0, 0, 0.3);
        }

        .project-title {
            font-family: var(--font-hero);
            font-size: clamp(3rem, 8vw, 6rem);
            color: white;
            line-height: 0.9;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            max-width: 80%;
            text-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .project-desc {
            font-family: var(--font-tech);
            font-size: 1rem;
            color: #ccc;
            max-width: 600px;
            line-height: 1.6;
            margin-bottom: 2rem;
            border-left: 3px solid var(--neon-lime);
            padding-left: 1.5rem;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            padding: 1rem;
        }

        .project-actions {
            display: flex;
            gap: 1rem;
            pointer-events: auto;
        }

        .view-case-btn {
            padding: 1rem 2rem;
            background: white;
            color: black;
            font-family: var(--font-tech);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid white;
        }

        .view-case-btn:hover {
            background: var(--neon-cyan);
            border-color: var(--neon-cyan);
        }

        /* --- BUTTONS & CONTROLS --- */
        .toggle-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            gap: 1rem;
            z-index: 60;
            pointer-events: none;
        }

        .ctrl-btn {
            width: 44px;
            height: 44px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            pointer-events: auto;
            backdrop-filter: blur(5px);
            background: rgba(0, 0, 0, 0.2);
            font-family: var(--font-tech);
            font-size: 0.8rem;
            color: white;
        }

        body.light-mode .ctrl-btn {
            border-color: rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.6);
            color: #111;
        }

        .ctrl-btn:hover {
            transform: scale(1.1);
        }

        .icon-sun,
        .icon-moon {
            position: absolute;
            transition: all 0.5s;
        }

        .icon-sun {
            opacity: 0;
            transform: scale(0.5) rotate(-90deg);
        }

        .icon-moon {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }

        body.light-mode .icon-sun {
            opacity: 1;
            transform: scale(1) rotate(0deg);
            color: #111;
        }

        body.light-mode .icon-moon {
            opacity: 0;
            transform: scale(0.5) rotate(90deg);
        }

        /* --- TYPOGRAPHY --- */
        .hero-title {
            font-family: var(--font-hero);
            font-size: clamp(2.5rem, 8vw, 8rem);
            font-weight: 700;
            text-transform: uppercase;
            line-height: 0.9;
            text-align: center;
            mix-blend-mode: normal;
            pointer-events: auto;
            position: relative;
            text-shadow: 0 0 20px rgba(196, 167, 125, 0.3);
            z-index: 20;
            cursor: default;
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .hero-title:hover {
            letter-spacing: 0.15em;
            color: #ffffff;
            text-shadow: 0 0 30px rgba(196, 167, 125, 0.8), 0 0 60px rgba(196, 167, 125, 0.4);
            transform: scale(1.05);
        }

        /* --- PROFILE EFFECT --- */
        .profile-wrapper {
            position: relative;
            width: 260px;
            height: 260px;
            margin-bottom: 3rem;
            perspective: 1000px;
            pointer-events: auto;
            cursor: pointer;
            z-index: 30;
        }

        .profile-core {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .glitch-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-image: url('Spynel P KOUTON.jpg');
            background-size: cover;
            background-position: center;
            opacity: 1;
            transition: all 0.3s ease;
        }

        .layer-base {
            z-index: 10;
            border: 2px solid var(--neon-cyan);
            overflow: hidden;
        }

        .layer-red {
            z-index: 9;
            opacity: 0;
            mix-blend-mode: screen;
            filter: hue-rotate(90deg);
            transform: translate(-5px, 0);
        }

        .layer-blue {
            z-index: 8;
            opacity: 0;
            mix-blend-mode: screen;
            filter: hue-rotate(-90deg);
            transform: translate(5px, 0);
        }

        .scanner-beam {
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            height: 20px;
            background: rgba(196, 167, 125, 0.8);
            box-shadow: 0 0 15px var(--neon-cyan);
            z-index: 15;
            animation: scan 3s linear infinite;
            opacity: 0.5;
        }

        @keyframes scan {
            0% {
                top: -20%;
                opacity: 0;
            }

            10% {
                opacity: 0.8;
            }

            90% {
                opacity: 0.8;
            }

            100% {
                top: 120%;
                opacity: 0;
            }
        }

        .tech-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            border: 1px dashed rgba(196, 167, 125, 0.3);
            pointer-events: none;
            transition: all 0.5s ease;
        }

        .ring-inner {
            width: 110%;
            height: 110%;
            border-style: solid;
            border-width: 1px;
            border-color: rgba(196, 167, 125, 0.5);
            animation: spin-slow 10s linear infinite;
        }

        .ring-outer {
            width: 130%;
            height: 130%;
            border-style: dashed;
            animation: spin-reverse 15s linear infinite;
        }

        @keyframes spin-slow {
            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        @keyframes spin-reverse {
            to {
                transform: translate(-50%, -50%) rotate(-360deg);
            }
        }

        .profile-wrapper.active-touch .profile-core,
        .profile-wrapper:hover .profile-core {
            transform: scale(1.1);
        }

        .profile-wrapper.active-touch .layer-red,
        .profile-wrapper:hover .layer-red {
            opacity: 0.6;
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .profile-wrapper.active-touch .layer-blue,
        .profile-wrapper:hover .layer-blue {
            opacity: 0.6;
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        .profile-wrapper.active-touch .tech-ring,
        .profile-wrapper:hover .tech-ring {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 20px rgba(196, 167, 125, 0.2);
        }

        @keyframes glitch-anim-1 {
            0% {
                transform: translate(-2px, 0);
            }

            100% {
                transform: translate(-6px, 2px);
            }
        }

        @keyframes glitch-anim-2 {
            0% {
                transform: translate(2px, 0);
            }

            100% {
                transform: translate(6px, -2px);
            }
        }

        .profile-wrapper:hover~.hero-title,
        .profile-wrapper:hover~.hero-subtitle {
            opacity: 0.3;
            filter: blur(4px);
            transform: scale(0.95);
        }

        .hero-subtitle {
            font-family: var(--font-tech);
            color: var(--neon-lime);
            margin-top: 1rem;
            font-size: clamp(0.7rem, 1.5vw, 1.2rem);
            letter-spacing: 2px;
            pointer-events: auto;
            transition: all 0.3s;
            text-align: center;
            padding: 0 1rem;
        }

        #custom-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 40px;
            height: 40px;
            border: 2px solid var(--neon-cyan);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 9999;
            transition: width 0.2s, height 0.2s, background-color 0.2s;
            mix-blend-mode: difference;
            display: block;
        }

        #custom-cursor.active {
            width: 80px;
            height: 80px;
            background-color: rgba(196, 167, 125, 0.1);
            border-color: var(--neon-lime);
        }

        .hud-nav {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(5, 5, 11, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 999px;
            padding: 0.5rem 1rem;
            display: flex;
            gap: 1rem;
            pointer-events: auto;
            z-index: 50;
            box-shadow: 0 0 30px rgba(10, 8, 6, 0.5);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease, background 0.5s ease;
        }

        .hud-nav.visible {
            opacity: 1;
            transform: translateY(0) translateX(-50%);
        }

        .hud-btn {
            font-family: var(--font-tech);
            font-size: 0.8rem;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 999px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
            text-transform: uppercase;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .hud-btn:hover {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            box-shadow: 0 0 15px var(--neon-cyan);
        }

        .hud-btn.active {
            background-color: var(--neon-lime);
            color: black;
            font-weight: bold;
        }

        #profile-module {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 40;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            perspective: 1000px;
        }

        #profile-module.active {
            opacity: 1;
            pointer-events: auto;
        }

        .holo-card {
            width: 90%;
            max-width: 600px;
            background: rgba(10, 8, 6, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid var(--neon-cyan);
            padding: 2rem;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 0 0 50px rgba(196, 167, 125, 0.2);
            clip-path: polygon(0 0, 100% 0, 100% 85%, 95% 100%, 0 100%);
        }

        .holo-title {
            font-family: var(--font-hero);
            font-size: 1.5rem;
            color: var(--neon-cyan);
        }

        .holo-content {
            font-family: var(--font-tech);
            color: #ddd;
            font-size: 0.9rem;
            margin-top: 1rem;
        }

        .close-holo {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: white;
            cursor: pointer;
            font-family: var(--font-tech);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.2rem 0.6rem;
            font-size: 0.7rem;
            transition: 0.3s;
        }

        .close-holo:hover {
            background: var(--neon-magenta);
            border-color: var(--neon-magenta);
        }

        .skill-bar-container {
            margin-top: 1rem;
        }

        .skill-track {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            margin-top: 0.2rem;
        }

        .skill-fill {
            height: 100%;
            background: var(--neon-cyan);
            width: 0%;
            transition: width 1.5s;
        }

        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-deep);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: var(--font-tech);
            transition: opacity 0.5s ease;
        }

        .loader-bar {
            width: 200px;
            height: 2px;
            background: #333;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
        }

        .loader-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%;
            background: var(--neon-cyan);
            animation: load 2.5s ease-out forwards;
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        @keyframes load {
            to {
                width: 100%;
            }
        }

        #flash-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            pointer-events: none;
            opacity: 0;
            z-index: 100;
            mix-blend-mode: screen;
        }

        @media (max-width: 768px) {
            .toggle-container {
                bottom: auto;
                top: 1.5rem;
                right: 1.5rem;
            }

            .profile-wrapper {
                width: 200px;
                height: 200px;
                margin-bottom: 3rem;
            }

            .hud-nav {
                width: 95%;
                justify-content: space-between;
                bottom: 1.5rem;
                padding: 0.5rem;
            }

            .hud-btn {
                padding: 0.8rem 0.5rem;
                font-size: 0.65rem;
                flex: 1;
                text-align: center;
            }

            #custom-cursor {
                display: none !important;
            }

            #home-layer {
                padding-bottom: 0;
                justify-content: center;
                padding-top: 5vh;
            }

            .ctrl-btn {
                width: 50px;
                height: 50px;
            }

            #projects-layer {
                padding: 0;
                gap: 0;
            }

            .project-content-wrapper {
                padding: 1.5rem;
                padding-bottom: 8rem;
                /* More space for navigation */
            }

            .project-number {
                font-size: 15vh;
                top: 5vh;
                right: 3vw;
                -webkit-text-stroke: 1px rgba(255, 255, 255, 0.1);
            }

            .project-type-pill {
                font-size: 0.7rem;
                padding: 0.4rem 0.8rem;
                margin-bottom: 1rem;
            }

            .project-title {
                font-size: 2rem;
                max-width: 90%;
                margin-bottom: 1rem;
            }

            .project-desc {
                font-size: 0.75rem;
                border-left: 2px solid var(--neon-lime);
                padding: 0.8rem;
                padding-left: 1rem;
                margin-bottom: 1.5rem;
                max-width: 100%;
                line-height: 1.5;
            }

            .project-actions {
                flex-direction: column;
                width: 100%;
            }

            .view-case-btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.75rem;
                width: 100%;
                text-align: center;
            }

            #autopilot-btn {
                bottom: 7rem;
                left: 1rem;
                font-size: 0.55rem;
                padding: 0.4rem 0.8rem;
            }

            .nav-arrow {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
                background: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(10px);
            }

            .nav-arrow.left {
                left: 1rem;
            }

            .nav-arrow.right {
                right: 1rem;
            }

            #back-to-projects-btn {
                top: 1rem;
                left: 1rem;
                padding: 0.5rem 1rem;
                font-size: 0.65rem;
            }

            /* Detail slide images on mobile */
            .detail-slide {
                justify-content: center;
                align-items: center;
            }

            .detail-slide img {
                width: 100%;
                height: auto;
                max-height: 80vh;
                object-fit: contain;
            }

            .next-project-card {
                padding: 2rem;
            }

            .next-project-card h2 {
                font-size: 2.5rem;
            }

            .next-project-card p {
                font-size: 0.9rem;
            }

            /* Project Detail Layer - Vertical Scroll on Mobile */
            /* Project Detail Layer - Vertical Scroll on Mobile */
            /* Project Detail Layer - Vertical Scroll on Mobile */
            #project-detail-layer {
                display: block !important;
                /* Use block layout for simple vertical stacking */
                overflow-x: hidden !important;
                overflow-y: scroll !important;
                scroll-snap-type: none !important;
                white-space: normal !important;
                padding: 0 !important;
                height: 100% !important;
            }

            .detail-slide {
                display: block !important;
                /* Block layout to avoid flex shrinking */
                width: 100% !important;
                height: auto !important;
                min-height: 0 !important;
                padding: 0 !important;
                margin: 0 !important;
                margin-bottom: 4px !important;
                /* Gap replacement */
                background: #000;
                border: none !important;
            }

            .detail-slide img {
                width: 100% !important;
                height: auto !important;
                max-height: none !important;
                /* Ensure no height limit */
                display: block !important;
                object-fit: cover !important;
                /* Ensure it covers width */
                margin: 0 !important;
            }

            .next-project-card {
                min-height: 100dvh !important;
                /* Use dynamic viewport height for full screen feel */
                width: 100% !important;
                padding: 6rem 2rem !important;
                /* Increased padding */
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                text-align: center !important;
                background: #050505 !important;
            }

            .next-project-card h2 {
                font-size: 2.5rem;
            }

            .next-project-card p {
                font-size: 0.9rem;
            }
        }

        .next-project-card {
            min-height: 100vh;
            width: 100vw;
            padding: 3rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .next-project-card h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .next-project-card p {
            font-size: 1rem;
            margin-bottom: 2rem;
        }

        .next-project-card .view-case-btn {
            width: auto;
            padding: 1rem 2rem;
        }
        }

        /* --- PROGRESS SYSTEM --- */
        #project-progress-container {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            z-index: 60;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #project-progress-container.active {
            opacity: 1;
        }

        .progress-bar-track {
            width: 200px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%;
            background: var(--neon-cyan);
            transition: width 0.1s linear;
        }

        .progress-counter {
            font-family: var(--font-tech);
            font-size: 0.8rem;
            color: var(--neon-cyan);
        }

        @media (max-width: 768px) {
            #project-progress-container {
                bottom: 6rem;
                left: 50%;
                transform: translateX(-50%);
                width: 80%;
                align-items: center;
            }

            .progress-bar-track {
                width: 100%;
            }
        }
    </style>
</head>

<body>

    <div class="noise-overlay"></div>

    <div id="flash-overlay"></div>

    <div class="toggle-container">
        <div class="ctrl-btn" id="lang-toggle" onclick="toggleLanguage()">EN</div>
        <div class="ctrl-btn" id="theme-toggle" onclick="toggleTheme()">
            <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#C4A77D"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#111" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        </div>
    </div>

    <div id="loader">
        <div style="color: var(--neon-cyan); letter-spacing: 2px;" id="loader-text">INITIALIZING SYSTEM...</div>
        <div class="loader-bar">
            <div class="loader-progress"></div>
        </div>
    </div>

    <div id="custom-cursor"></div>
    <div id="canvas-container" class="fixed inset-0 z-0"></div>

    <!-- PROJECT PROGRESS -->
    <div id="project-progress-container">
        <div class="progress-counter" id="progress-counter">01 / 04</div>
        <div class="progress-bar-track">
            <div class="progress-bar-fill" id="progress-fill"></div>
        </div>
    </div>

    <!-- PROFILE MODULE -->
    <div id="profile-module">
        <div class="holo-card" id="holo-card">
            <div class="close-holo" onclick="toggleProfile(false)">[X] TERMINATE</div>
            <div class="holo-title" id="holo-title">IDENTITÉ</div>
            <div class="text-xs text-gray-500 mb-4" id="holo-status">ID: 5PY-N3L // STATUS: ONLINE</div>
            <div class="holo-content">
                <p id="bio-text" class="scramble-target"></p>
                <div class="mt-8 border-t border-white/10 pt-4">
                    <div class="skill-bar-container">
                        <div class="flex justify-between text-xs text-[#E5D3B3]"><span
                                id="skill-1">CREATIVITY</span><span>98%</span></div>
                        <div class="skill-track">
                            <div class="skill-fill" style="width: 0%" data-width="98%"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="flex justify-between text-xs text-[#E5D3B3]"><span id="skill-2">WEBGL /
                                3D</span><span>92%</span></div>
                        <div class="skill-track">
                            <div class="skill-fill" style="width: 0%" data-width="92%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PROJECT DETAIL MODAL -->
    <!-- PROJECT DETAIL LAYER -->
    <div id="project-detail-layer" class="full-layer hidden">
        <!-- JS will populate this -->
    </div>

    <!-- BACK TO PROJECTS BTN -->
    <div id="back-to-projects-btn" onclick="closeProjectDetail()">
        < PREVIOUS LAYER </div>

            <!-- HOME LAYER -->
            <div id="home-layer" class="full-layer">
                <div class="flex flex-col items-center justify-center p-4">
                    <div class="profile-wrapper" onclick="toggleProfile(true)" onmouseenter="setWarpSpeed(true)"
                        onmouseleave="setWarpSpeed(false)"
                        ontouchstart="setWarpSpeed(true); this.classList.add('active-touch')"
                        ontouchend="setWarpSpeed(false); this.classList.remove('active-touch')">
                        <div class="tech-ring ring-outer"></div>
                        <div class="tech-ring ring-inner"></div>
                        <div class="profile-core">
                            <div class="layer-red glitch-layer"></div>
                            <div class="layer-blue glitch-layer"></div>
                            <div class="layer-base glitch-layer">
                                <div class="scanner-beam"></div>
                            </div>
                        </div>
                        <div class="absolute -bottom-10 left-1/2 transform -translate-x-1/2 text-[10px] font-mono ui-text-accent opacity-60 tracking-widest whitespace-nowrap"
                            id="access-text">
                            [ ACCÈS AUTORISÉ ]
                        </div>
                    </div>

                    <h1 class="hero-title" id="main-title">SPYNEL<br>KOUTON</h1>
                    <p class="hero-subtitle" id="hero-subtitle">[ DESIGNER &amp; DÉVELOPPEUR ]</p>

                    <div class="mt-8 group cursor-pointer pointer-events-auto" onclick="reTriggerBigBang()">
                        <div
                            class="border border-white/20 px-8 py-4 rounded-none bg-black/50 backdrop-blur-sm group-hover:bg-white/10 transition-all relative overflow-hidden">
                            <span class="font-mono text-xs text-[#C0FF00]" style="color: var(--neon-lime)"
                                id="init-btn-text">>>
                                INITIALIZE SEQUENCE_01</span>
                            <div class="absolute bottom-0 left-0 h-[2px] w-full bg-[#C0FF00] transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"
                                style="background-color: var(--neon-lime)"></div>
                        </div>
                    </div>
                </div>

                <div class="absolute top-10 left-10 font-mono text-xs ui-text-dim hidden md:block">
                    <span id="coords-label">COORDS</span>: <span id="coords">00.00 / 00.00</span><br>
                    <span id="sys-label">SYS: STABLE</span>
                </div>
                <div class="absolute top-10 right-10 font-mono text-xs ui-text-accent animate-pulse hidden md:block"
                    id="live-text">
                    ● LIVE CONNECTION
                </div>
            </div>

            <!-- PROJECTS LAYER -->
            <div id="projects-layer" class="full-layer hidden">
                <!-- JS will populate this -->
            </div>

            <!-- PROJECT NAV CONTROLS -->
            <div id="project-controls">
                <div class="nav-arrow left" onclick="scrollProjects(-1)">‹</div>
                <div class="nav-arrow right" onclick="scrollProjects(1)">›</div>
            </div>

            <!-- AUTO SCROLL BTN -->
            <button id="autopilot-btn" onclick="toggleAutoScroll()" style="display: none;">[ AUTO-PILOT: OFF ]</button>

            <nav class="hud-nav" id="hud-nav">
                <div class="hud-btn active" data-target="home" onclick="navigate('home')">Accueil</div>
                <div class="hud-btn" data-target="projects" onclick="navigate('projects')">Projets</div>
                <div class="hud-btn" onclick="toggleProfile(true)">Profil</div>
                <div class="hud-btn">Comms</div>
            </nav>

            <script>
                // --- TEXT SCRAMBLE CLASS ---
                class TextScramble {
                    constructor(el) { this.el = el; this.chars = '!<>-_\\/[]{}—=+*^?#________'; this.update = this.update.bind(this); }
                    setText(newText) { const oldText = this.el.innerText; const length = Math.max(oldText.length, newText.length); const promise = new Promise((resolve) => this.resolve = resolve); this.queue = []; for (let i = 0; i < length; i++) { const from = oldText[i] || ''; const to = newText[i] || ''; const start = Math.floor(Math.random() * 40); const end = start + Math.floor(Math.random() * 40); this.queue.push({ from, to, start, end }); } cancelAnimationFrame(this.frameRequest); this.frame = 0; this.update(); return promise; }
                    update() { let output = ''; let complete = 0; for (let i = 0, n = this.queue.length; i < n; i++) { let { from, to, start, end, char } = this.queue[i]; if (this.frame >= end) { complete++; output += to; } else if (this.frame >= start) { if (!char || Math.random() < 0.28) { char = this.chars[Math.floor(Math.random() * this.chars.length)]; this.queue[i].char = char; } output += `<span style="color:#C4A77D; opacity:0.5">${char}</span>`; } else { output += from; } } this.el.innerHTML = output; if (complete === this.queue.length) { this.resolve(); } else { this.frameRequest = requestAnimationFrame(this.update); this.frame++; } }
                }

                // --- THREE.JS SETUP ---
                const container = document.getElementById('canvas-container');
                const scene = new THREE.Scene();
                const fogColorDark = new THREE.Color(0x0A0806);
                const fogColorLight = new THREE.Color(0xE6E8EC);
                scene.fog = new THREE.FogExp2(fogColorDark, 0.0005);
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 3000);
                camera.position.z = 60;
                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                container.appendChild(renderer.domElement);
                const ambientLight = new THREE.AmbientLight(0x404040, 1.0); scene.add(ambientLight);
                const sunLight = new THREE.PointLight(0xFFDD88, 2, 1200); sunLight.position.set(-150, 80, -200); scene.add(sunLight);

                // --- SPACE OBJECTS ---
                const sunGeometry = new THREE.SphereGeometry(40, 32, 32);
                const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xFFDD88 });
                const sun = new THREE.Mesh(sunGeometry, sunMaterial); sun.position.copy(sunLight.position);
                function generateGlowTexture() { const c = document.createElement('canvas'); c.width = 64; c.height = 64; const x = c.getContext('2d'); const g = x.createRadialGradient(32, 32, 0, 32, 32, 32); g.addColorStop(0, 'rgba(255,255,255,1)'); g.addColorStop(0.2, 'rgba(255,220,100,0.5)'); g.addColorStop(0.5, 'rgba(255,200,50,0.1)'); g.addColorStop(1, 'rgba(0,0,0,0)'); x.fillStyle = g; x.fillRect(0, 0, 64, 64); return c; }
                const sunGlow = new THREE.Sprite(new THREE.SpriteMaterial({ map: new THREE.CanvasTexture(generateGlowTexture()), color: 0xFFDD88, transparent: true, blending: THREE.AdditiveBlending }));
                sunGlow.scale.set(350, 350, 1); sun.add(sunGlow); scene.add(sun);

                const planets = []; const planetGroup = new THREE.Group(); scene.add(planetGroup);
                function createPlanet(radius, dist, color, speed, hasRing) {
                    const pivot = new THREE.Object3D(); pivot.rotation.y = Math.random() * Math.PI * 2;
                    const geo = new THREE.IcosahedronGeometry(radius, 4);
                    const mat = new THREE.MeshStandardMaterial({ color: color, roughness: 0.8, metalness: 0.1 });
                    const mesh = new THREE.Mesh(geo, mat); mesh.position.set(dist, (Math.random() - 0.5) * 10, (Math.random() - 0.5) * 10);
                    pivot.add(mesh); planetGroup.add(pivot);
                    if (hasRing) { const rGeo = new THREE.TorusGeometry(radius * 1.6, 0.4, 2, 60); const rMat = new THREE.MeshBasicMaterial({ color: 0x88AAFF, transparent: true, opacity: 0.4 }); const r = new THREE.Mesh(rGeo, rMat); r.rotation.x = Math.PI / 2 + 0.2; mesh.add(r); }
                    return { pivot, mesh, speed };
                }
                planets.push(createPlanet(4, 50, 0x8C7B6D, 0.001, false)); planets.push(createPlanet(8, 90, 0x224466, 0.0008, true)); planets.push(createPlanet(5, 130, 0xC4A77D, 0.0015, false)); planets.push(createPlanet(10, 180, 0x553344, 0.0005, true)); planets.push(createPlanet(3, 220, 0xAAAAAA, 0.002, false)); planets.push(createPlanet(6, 280, 0x335533, 0.001, false));

                const bbCount = 5000; const bbGeo = new THREE.BufferGeometry(); const bbPos = new Float32Array(bbCount * 3); const bbVel = [];
                for (let i = 0; i < bbCount; i++) { bbPos[i * 3] = 0; bbPos[i * 3 + 1] = 0; bbPos[i * 3 + 2] = 0; const th = Math.random() * Math.PI * 2; const ph = Math.acos((Math.random() * 2) - 1); const sp = Math.random() * 4 + 1; bbVel.push({ x: sp * Math.sin(ph) * Math.cos(th), y: sp * Math.sin(ph) * Math.sin(th), z: sp * Math.cos(ph) }); }
                bbGeo.setAttribute('position', new THREE.BufferAttribute(bbPos, 3));
                const bbMat = new THREE.PointsMaterial({ color: 0xFFF8E7, size: 0.4, transparent: true, opacity: 0, blending: THREE.AdditiveBlending });
                const bigBangSys = new THREE.Points(bbGeo, bbMat); scene.add(bigBangSys);
                const shockwave = new THREE.Mesh(new THREE.TorusGeometry(1, 0.2, 2, 100), new THREE.MeshBasicMaterial({ color: 0xC4A77D, transparent: true, opacity: 0 })); shockwave.rotation.x = Math.PI / 2; scene.add(shockwave);

                let bbActive = false;
                function triggerBigBang() {
                    const p = bigBangSys.geometry.attributes.position.array;
                    for (let i = 0; i < bbCount; i++) { p[i * 3] = 0; p[i * 3 + 1] = 0; p[i * 3 + 2] = 0; const th = Math.random() * Math.PI * 2; const ph = Math.acos((Math.random() * 2) - 1); const sp = (Math.random() * 5) + 1.5; bbVel[i].x = sp * Math.sin(ph) * Math.cos(th); bbVel[i].y = sp * Math.sin(ph) * Math.sin(th); bbVel[i].z = sp * Math.cos(ph); }
                    bigBangSys.geometry.attributes.position.needsUpdate = true; bbActive = true; bbMat.opacity = 1; shockwave.scale.set(0.1, 0.1, 0.1); shockwave.material.opacity = 0.5;
                    const flash = document.getElementById('flash-overlay'); gsap.fromTo(flash, { opacity: 0.8 }, { opacity: 0, duration: 1.5, ease: "power2.out" });
                    gsap.to(bbMat, { opacity: 0, duration: 3, ease: "power2.in", delay: 1.5 }); gsap.to(shockwave.scale, { x: 150, y: 150, duration: 4, ease: "power2.out" }); gsap.to(shockwave.material, { opacity: 0, duration: 3, ease: "power2.out" });
                }
                window.reTriggerBigBang = function () { document.getElementById('home-layer').classList.remove('active'); document.getElementById('hud-nav').classList.remove('visible'); triggerBigBang(); setTimeout(() => { document.getElementById('home-layer').classList.add('active'); document.getElementById('hud-nav').classList.add('visible'); }, 3000); }

                class ShootingStar {
                    constructor() { this.mesh = new THREE.Group(); const h = new THREE.Mesh(new THREE.SphereGeometry(0.3, 8, 8), new THREE.MeshBasicMaterial({ color: 0xffffff })); const t = new THREE.Mesh(new THREE.CylinderGeometry(0.01, 0.3, 40, 8), new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.8 })); t.rotation.x = -Math.PI / 2; t.position.z = -20; this.mesh.add(h); this.mesh.add(t); scene.add(this.mesh); this.reset(); }
                    reset() { this.active = false; this.mesh.visible = false; this.delay = Math.random() * 400 + 100; }
                    spawn() { this.active = true; this.mesh.visible = true; this.speed = 3.0 + Math.random() * 2.0; const sx = (Math.random() - 0.5) * 800; const sy = (Math.random() - 0.5) * 400; const sz = -200 + (Math.random() * 400); this.mesh.position.set(sx, sy, sz); const t = new THREE.Vector3(sx + (Math.random() - 0.5) * 400, sy + (Math.random() - 0.5) * 200, sz + 200); this.velocity = new THREE.Vector3().subVectors(t, this.mesh.position).normalize().multiplyScalar(this.speed); this.mesh.lookAt(t); this.life = 0; this.maxLife = 150; }
                    update() { if (!this.active) { this.delay--; if (this.delay <= 0) this.spawn(); return; } this.mesh.position.add(this.velocity); this.life++; if (this.life > this.maxLife) this.reset(); }
                }
                const meteors = []; for (let i = 0; i < 4; i++) meteors.push(new ShootingStar());

                function createStarLayer(count, size, color, spread) {
                    const g = new THREE.BufferGeometry(); const v = []; for (let i = 0; i < count; i++) v.push((Math.random() - 0.5) * spread, (Math.random() - 0.5) * spread, (Math.random() - 0.5) * spread);
                    g.setAttribute('position', new THREE.Float32BufferAttribute(v, 3));
                    const c = document.createElement('canvas'); c.width = 32; c.height = 32; const x = c.getContext('2d'); const gr = x.createRadialGradient(16, 16, 0, 16, 16, 16); gr.addColorStop(0, 'rgba(255,255,255,1)'); gr.addColorStop(1, 'rgba(0,0,0,0)'); x.fillStyle = gr; x.fillRect(0, 0, 32, 32);
                    const m = new THREE.PointsMaterial({ size: size, color: color, map: new THREE.CanvasTexture(c), transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending, depthWrite: false });
                    return new THREE.Points(g, m);
                }
                const starsBack = createStarLayer(6000, 0.5, 0xAAAAAA, 2500); scene.add(starsBack);
                const starsMid = createStarLayer(2000, 1.0, 0xC4A77D, 1500); scene.add(starsMid);
                const starsFront = createStarLayer(400, 2.0, 0xE5D3B3, 800); scene.add(starsFront);

                // --- LANGUAGE CONFIG ---
                let currentLang = 'FR';
                const langData = {
                    FR: { subtitle: "[ DESIGNER & DÉVELOPPEUR ]", nav: ["Accueil", "Projets", "Profil", "Comms"], initBtn: ">> INITIALIZE SEQUENCE_01", cardTitle: "IDENTITÉ", cardStatus: "ID: 5PY-N3L // STATUS: ONLINE", skills: ["CREATIVITY", "WEBGL / 3D"], bio: "Profil hybride naviguant entre le design pur et l'ingénierie complexe. Je ne construis pas des sites web, je sculpte des expériences numériques vivantes.", access: "[ ACCÈS AUTORISÉ ]", live: "● LIVE CONNECTION", coords: "COORDS", sys: "SYS: STABLE", loader: "INITIALIZING SYSTEM..." },
                    EN: { subtitle: "[ DESIGNER & DEVELOPER ]", nav: ["Home", "Projects", "Profile", "Contact"], initBtn: ">> INITIALIZE SEQUENCE_01", cardTitle: "IDENTITY", cardStatus: "ID: 5PY-N3L // STATUS: ONLINE", skills: ["CREATIVITY", "WEBGL / 3D"], bio: "Hybrid profile navigating between pure design and complex engineering. I don't build websites, I sculpt living digital experiences.", access: "[ ACCESS GRANTED ]", live: "● LIVE CONNECTION", coords: "COORDS", sys: "SYS: STABLE", loader: "INITIALIZING SYSTEM..." }
                };

                // --- NAVIGATION & PROJECTS ---
                const projectsData = [
                    {
                        title: "ARBITRA",
                        type: { fr: "Blockchain Platform", en: "Blockchain Platform" },
                        desc: { fr: "Plateforme blockchain décentralisée pour le trading d'arbitrage crypto.", en: "Decentralized blockchain platform for crypto arbitrage trading." },
                        tools: "Figma, UI/UX Design",
                        img: "Projets/Arbitra/Accueil.webp",
                        gallery: ["Projets/Arbitra/Log-dark.webp", "Projets/Arbitra/Sign-dark.webp", "Projets/Arbitra/Dash-dark.webp", "Projets/Arbitra/Tarif.webp", "Projets/Arbitra/Contact.webp", "Projets/Arbitra/Newsletter.webp"]
                    },
                    {
                        title: "NEXT GEN",
                        type: { fr: "Web Design", en: "Web Design" },
                        desc: { fr: "Design moderne et épuré pour une expérience utilisateur optimale.", en: "Modern and clean design for optimal user experience." },
                        tools: "Figma, UI/UX Design",
                        img: "Projets/NextGen/1.webp",
                        gallery: ["Projets/NextGen/2.webp", "Projets/NextGen/3.webp", "Projets/NextGen/4.webp", "Projets/NextGen/5.webp"]
                    },
                    {
                        title: "CRISPY",
                        type: { fr: "Restaurant Design", en: "Restaurant Design" },
                        desc: { fr: "Interface moderne pour un restaurant gastronomique.", en: "Modern interface for a gourmet restaurant." },
                        tools: "Figma, UI/UX Design",
                        img: "Projets/Crispy/crispy.webp",
                        gallery: ["Projets/Crispy/Desktop2.webp"]
                    },
                    {
                        title: "SNAKI",
                        type: { fr: "Game Design", en: "Game Design" },
                        desc: { fr: "Jeu snake moderne avec une interface graphique attractive.", en: "Modern snake game with attractive graphic interface." },
                        tools: "Game Design, UI/UX",
                        img: "Projets/Snaki/1.webp",
                        gallery: ["Projets/Snaki/2.webp", "Projets/Snaki/3.webp", "Projets/Snaki/4.webp", "Projets/Snaki/5.webp", "Projets/Snaki/6.webp", "Projets/Snaki/7.webp", "Projets/Snaki/8.webp", "Projets/Snaki/9.webp", "Projets/Snaki/10.webp", "Projets/Snaki/11.webp"]
                    },
                    {
                        title: "ASTRO",
                        type: { fr: "Space Design", en: "Space Design" },
                        desc: { fr: "Design spatial futuriste avec des éléments interactifs.", en: "Futuristic space design with interactive elements." },
                        tools: "Figma, UI/UX Design",
                        img: "Projets/Astro/home.webp",
                        gallery: []
                    }
                ];

                function initProjects() {
                    const container = document.getElementById('projects-layer');
                    container.innerHTML = '';
                    // Clone items for infinite scroll illusion (3 sets)
                    const allProjects = [...projectsData, ...projectsData, ...projectsData];

                    allProjects.forEach((p, index) => {
                        const card = document.createElement('div');
                        card.className = 'project-card';
                        card.onclick = () => openProjectDetail(index % projectsData.length);

                        const langKey = currentLang === 'FR' ? 'fr' : 'en';
                        const num = String((index % projectsData.length) + 1).padStart(2, '0');

                        card.innerHTML = `
                    <img src="${p.img}" alt="${p.title}" class="project-bg-img">
                    <div class="project-overlay-gradient"></div>
                    <div class="project-number">${num}</div>
                    <div class="project-content-wrapper">
                        <div class="project-type-pill">${p.type[langKey]}</div>
                        <div class="project-title">${p.title}</div>
                        <div class="project-desc">${p.desc[langKey]}</div>
                        <div class="project-actions">
                            <div class="view-case-btn">[ VIEW CASE STUDY ]</div>
                        </div>
                    </div>
                `;
                        container.appendChild(card);
                    });

                    // Parallax Background on Scroll
                    container.onscroll = () => {
                        const scrollPct = container.scrollLeft / container.scrollWidth;
                        planetGroup.rotation.y = scrollPct * Math.PI * 4;
                        starsBack.rotation.y = scrollPct * 0.8;

                        const totalWidth = container.scrollWidth;
                        const oneSetWidth = totalWidth / 3;

                        if (container.scrollLeft >= oneSetWidth * 2) {
                            container.scrollLeft -= oneSetWidth;
                        } else if (container.scrollLeft <= 10) {
                            container.scrollLeft += oneSetWidth;
                        }

                        if (typeof updateProgress === 'function') updateProgress();
                    };

                    // Initial scroll
                    setTimeout(() => {
                        const oneSetWidth = container.scrollWidth / 3;
                        container.scrollLeft = oneSetWidth;
                        if (typeof updateProgress === 'function') updateProgress();
                    }, 100);
                }
                initProjects();

                // --- PROJECT NAVIGATION ---
                const projectContainer = document.getElementById('projects-layer');

                function updateProgress() {
                    const container = document.getElementById('projects-layer');
                    const totalWidth = container.scrollWidth;
                    const oneSetWidth = totalWidth / 3;
                    const currentScroll = container.scrollLeft;

                    // Calculate relative position within the middle set
                    let relativeScroll = currentScroll - oneSetWidth;
                    // Handle edge cases where we might be slightly off due to scroll reset
                    if (relativeScroll < -oneSetWidth / 2) relativeScroll += oneSetWidth;

                    const totalProjects = projectsData.length;
                    const cardWidth = window.innerWidth;

                    // Calculate current index (0 to totalProjects - 1)
                    let currentIndex = Math.round(relativeScroll / cardWidth) % totalProjects;
                    if (currentIndex < 0) currentIndex = totalProjects + currentIndex;

                    // Update Text
                    const currentNum = String(currentIndex + 1).padStart(2, '0');
                    const totalNum = String(totalProjects).padStart(2, '0');
                    const counterEl = document.getElementById('progress-counter');
                    if (counterEl) counterEl.innerText = `${currentNum} / ${totalNum}`;

                    // Update Bar
                    const progress = ((currentIndex + 1) / totalProjects) * 100;
                    const fillEl = document.getElementById('progress-fill');
                    if (fillEl) fillEl.style.width = `${progress}%`;
                }

                function scrollProjects(dir) {
                    const cardWidth = window.innerWidth; // Full screen cards
                    projectContainer.scrollBy({
                        left: dir * cardWidth,
                        behavior: 'smooth'
                    });
                }

                // --- AUTO SCROLL LOGIC ---
                let autoScrollActive = false;

                function toggleAutoScroll() {
                    autoScrollActive = !autoScrollActive;
                    const btn = document.getElementById('autopilot-btn');
                    btn.innerText = autoScrollActive ? "[ AUTO-PILOT: ON ]" : "[ AUTO-PILOT: OFF ]";
                    btn.classList.toggle('active');
                    if (autoScrollActive) animateScroll();
                }

                function animateScroll() {
                    if (!autoScrollActive) return;
                    projectContainer.scrollLeft += 2; // Speed
                    const totalWidth = projectContainer.scrollWidth;
                    const oneSetWidth = totalWidth / 3;
                    if (projectContainer.scrollLeft >= oneSetWidth * 2) {
                        projectContainer.scrollLeft -= oneSetWidth;
                    }
                    requestAnimationFrame(animateScroll);
                }

                // Wheel Event - Smooth one-by-one scrolling
                let lastScrollTime = 0;
                const scrollCooldown = 150; // Shorter cooldown for responsive feel

                projectContainer.addEventListener('wheel', (evt) => {
                    evt.preventDefault();

                    const now = Date.now();
                    if (now - lastScrollTime < scrollCooldown) return;

                    lastScrollTime = now;

                    // Determine scroll direction
                    const direction = (evt.deltaY > 0 || evt.deltaX > 0) ? 1 : -1;

                    // Scroll by one project width
                    scrollProjects(direction);
                });

                // --- PROJECT DETAIL LOGIC (FULL SCREEN CAROUSEL) ---
                let currentProjectIndex = 0;

                window.openProjectDetail = function (index) {
                    currentProjectIndex = index;
                    const p = projectsData[index];
                    const detailLayer = document.getElementById('project-detail-layer');
                    const projectsLayer = document.getElementById('projects-layer');
                    const backBtn = document.getElementById('back-to-projects-btn');
                    const navControls = document.getElementById('project-controls');

                    // Clear previous content
                    detailLayer.innerHTML = '';

                    // 1. Add all images as full-screen slides
                    const allImages = [p.img, ...p.gallery];
                    allImages.forEach(imgSrc => {
                        const slide = document.createElement('div');
                        slide.className = 'detail-slide';
                        slide.innerHTML = `<img src="${imgSrc}" alt="Project Image">`;
                        detailLayer.appendChild(slide);
                    });

                    // 2. Add "Next Project" slide
                    const nextIndex = (index + 1) % projectsData.length;
                    const nextP = projectsData[nextIndex];
                    const nextSlide = document.createElement('div');
                    nextSlide.className = 'detail-slide next-project-card';
                    nextSlide.onclick = () => nextProject();
                    nextSlide.innerHTML = `
                        <p>[ NEXT PROJECT ]</p>
                        <h2>${nextP.title}</h2>
                        <div class="view-case-btn" style="background:transparent; color:white; border-color:white;">>> PROCEED</div>
                    `;
                    detailLayer.appendChild(nextSlide);

                    // Transition
                    gsap.to(projectsLayer, {
                        opacity: 0, scale: 0.9, duration: 0.5, onComplete: () => {
                            projectsLayer.classList.add('hidden');
                            projectsLayer.classList.remove('active');

                            detailLayer.classList.remove('hidden');
                            detailLayer.classList.add('active');

                            // Reset scroll for both desktop (horizontal) and mobile (vertical)
                            detailLayer.scrollLeft = 0;
                            detailLayer.scrollTop = 0;

                            gsap.fromTo(detailLayer, { opacity: 0, x: 100 }, { opacity: 1, x: 0, scale: 1, duration: 0.5 });

                            // Show back button
                            backBtn.style.display = 'block';
                            gsap.fromTo(backBtn, { opacity: 0, y: -20 }, { opacity: 1, y: 0, delay: 0.5, duration: 0.5 });

                            // Hide main nav controls
                            if (navControls) navControls.style.display = 'none';
                        }
                    });
                }

                window.nextProject = function () {
                    const nextIndex = (currentProjectIndex + 1) % projectsData.length;

                    // Transition effect between projects
                    const detailLayer = document.getElementById('project-detail-layer');

                    gsap.to(detailLayer, {
                        opacity: 0, x: -100, duration: 0.5, onComplete: () => {
                            openProjectDetail(nextIndex);
                        }
                    });
                }

                window.closeProjectDetail = function () {
                    const detailLayer = document.getElementById('project-detail-layer');
                    const projectsLayer = document.getElementById('projects-layer');
                    const backBtn = document.getElementById('back-to-projects-btn');
                    const navControls = document.getElementById('project-controls');

                    gsap.to(detailLayer, {
                        opacity: 0, x: 100, duration: 0.5, onComplete: () => {
                            detailLayer.classList.add('hidden');
                            detailLayer.classList.remove('active');

                            projectsLayer.classList.remove('hidden');
                            projectsLayer.classList.add('active');

                            gsap.fromTo(projectsLayer, { opacity: 0, scale: 0.9 }, { opacity: 1, scale: 1, duration: 0.5 });

                            backBtn.style.display = 'none';
                            if (navControls) navControls.style.display = 'block';
                        }
                    });
                }

                window.navigate = function (target) {
                    const home = document.getElementById('home-layer');
                    const projects = document.getElementById('projects-layer');
                    const detailLayer = document.getElementById('project-detail-layer');
                    const btns = document.querySelectorAll('.hud-btn');
                    const autoBtn = document.getElementById('autopilot-btn');
                    const projectNav = document.getElementById('project-controls');
                    const backBtn = document.getElementById('back-to-projects-btn');
                    const progressContainer = document.getElementById('project-progress-container');

                    btns.forEach(b => b.classList.remove('active'));
                    document.querySelector(`.hud-btn[data-target="${target}"]`).classList.add('active');

                    // If we are in detail view and navigating away, close it first
                    if (detailLayer && detailLayer.classList.contains('active')) {
                        detailLayer.classList.remove('active');
                        detailLayer.classList.add('hidden');
                        if (backBtn) backBtn.style.display = 'none';
                    }

                    if (target === 'projects') {
                        gsap.to(home, {
                            opacity: 0, y: -50, duration: 0.5, onComplete: () => {
                                home.classList.add('hidden');
                                projects.classList.remove('hidden');
                                projects.classList.add('active');
                                autoBtn.style.display = 'block';
                                if (projectNav) projectNav.style.display = 'block';
                                if (projectNav) projectNav.classList.add('active');
                                if (progressContainer) progressContainer.classList.add('active');

                                gsap.to(window, { warpSpeed: 2, duration: 0.5, yoyo: true, repeat: 1 });
                                gsap.to(camera.position, { x: 200, duration: 2, ease: "power2.inOut" });
                                gsap.fromTo(projects, { opacity: 0, x: 100 }, { opacity: 1, x: 0, duration: 1, delay: 0.5 });
                            }
                        });
                    } else if (target === 'home') {
                        projects.classList.remove('active');
                        autoBtn.style.display = 'none';
                        autoScrollActive = false;
                        document.getElementById('autopilot-btn').innerText = "[ AUTO-PILOT: OFF ]";
                        document.getElementById('autopilot-btn').classList.remove('active');
                        if (projectNav) projectNav.classList.remove('active');
                        if (progressContainer) progressContainer.classList.remove('active');

                        gsap.to(projects, {
                            opacity: 0, x: 100, duration: 0.5, onComplete: () => {
                                projects.classList.add('hidden');
                                home.classList.remove('hidden');
                                gsap.to(window, { warpSpeed: 2, duration: 0.5, yoyo: true, repeat: 1 });
                                gsap.to(camera.position, { x: 0, duration: 2, ease: "power2.inOut" });
                                gsap.fromTo(home, { opacity: 0, y: 50 }, { opacity: 1, y: 0, duration: 1, delay: 0.5 });
                            }
                        });
                    }
                }

                window.toggleLanguage = function () {
                    currentLang = currentLang === 'FR' ? 'EN' : 'FR'; const data = langData[currentLang]; const btn = document.getElementById('lang-toggle');
                    gsap.to(btn, { scale: 0.8, duration: 0.1, yoyo: true, repeat: 1 }); btn.innerText = currentLang;
                    const safeSet = (id, txt) => { const el = document.getElementById(id); if (el) el.innerText = txt; }
                    safeSet('hero-subtitle', data.subtitle); safeSet('init-btn-text', data.initBtn); safeSet('holo-title', data.cardTitle); safeSet('holo-status', data.cardStatus); safeSet('skill-1', data.skills[0]); safeSet('skill-2', data.skills[1]); safeSet('access-text', data.access); safeSet('live-text', data.live); safeSet('coords-label', data.coords); safeSet('sys-label', data.sys); if (document.getElementById('loader-text')) document.getElementById('loader-text').innerText = data.loader;
                    const navBtns = document.querySelectorAll('.hud-btn'); navBtns.forEach((b, i) => { if (data.nav[i]) b.innerText = data.nav[i]; });
                    scrambler.setText(data.bio);
                    initProjects();
                }

                // --- THEME TOGGLE ---
                let isDark = true;
                window.toggleTheme = function () {
                    isDark = !isDark;
                    document.body.classList.toggle('light-mode');

                    const targetFog = isDark ? fogColorDark : fogColorLight;
                    const targetStarColor = isDark ? 0xAAAAAA : 0x222222;
                    const targetSunColor = isDark ? 0xFFDD88 : 0x88CCFF;
                    const targetAmbient = isDark ? 1.0 : 2.5;

                    gsap.to(scene.fog.color, { r: targetFog.r, g: targetFog.g, b: targetFog.b, duration: 1.5 });

                    const sCol = new THREE.Color(targetStarColor);
                    gsap.to(starsBack.material.color, { r: sCol.r, g: sCol.g, b: sCol.b, duration: 1 });
                    gsap.to(starsMid.material.color, { r: sCol.r, g: sCol.g, b: sCol.b, duration: 1 });
                    gsap.to(starsFront.material.color, { r: sCol.r, g: sCol.g, b: sCol.b, duration: 1 });

                    const sunCol = new THREE.Color(targetSunColor);
                    gsap.to(sunMaterial.color, { r: sunCol.r, g: sunCol.g, b: sunCol.b, duration: 1.5 });
                    gsap.to(sunLight.color, { r: sunCol.r, g: sunCol.g, b: sunCol.b, duration: 1.5 });
                    gsap.to(sunGlow.material.color, { r: sunCol.r, g: sunCol.g, b: sunCol.b, duration: 1.5 });

                    gsap.to(ambientLight, { intensity: targetAmbient, duration: 1 });
                }

                // --- ANIMATION LOOP ---
                let warpSpeed = 0; window.setWarpSpeed = function (active) { gsap.to(window, { warpSpeed: active ? 1 : 0, duration: 1 }); }
                const mouse = new THREE.Vector2(); const targetMouse = new THREE.Vector2();
                const updateInput = (x, y) => { mouse.x = (x / window.innerWidth) * 2 - 1; mouse.y = -(y / window.innerHeight) * 2 + 1; targetMouse.x = x; targetMouse.y = y; const card = document.getElementById('holo-card'); if (document.getElementById('profile-module').classList.contains('active')) { card.style.transform = `perspective(1000px) rotateX(${-mouse.y * 5}deg) rotateY(${mouse.x * 5}deg)`; } };
                document.addEventListener('mousemove', (e) => updateInput(e.clientX, e.clientY));
                document.addEventListener('touchmove', (e) => { const touch = e.touches[0]; updateInput(touch.clientX, touch.clientY); }, { passive: false });

                const cursor = document.getElementById('custom-cursor'); let cX = 0, cY = 0;
                function animCursor() { cX += (targetMouse.x - cX) * 0.15; cY += (targetMouse.y - cY) * 0.15; if (cursor) { cursor.style.left = cX + 'px'; cursor.style.top = cY + 'px'; } requestAnimationFrame(animCursor); } animCursor();
                document.querySelectorAll('a, div[onclick]').forEach(el => { el.addEventListener('mouseenter', () => cursor.classList.add('active')); el.addEventListener('mouseleave', () => cursor.classList.remove('active')); });

                let gyroX = 0; let gyroY = 0;
                window.addEventListener('deviceorientation', (e) => { if (e.beta && e.gamma) { gyroX = e.gamma / 90; gyroY = e.beta / 90; } });

                function animate() {
                    requestAnimationFrame(animate);
                    const speedMultiplier = 1 + (warpSpeed * 20); const targetCamX = (mouse.x * 5) + (gyroX * 10); const targetCamY = (mouse.y * 5) + (gyroY * 10);
                    planets.forEach(p => { p.pivot.rotation.y += p.speed * speedMultiplier; p.mesh.rotation.y += 0.01; });
                    starsBack.rotation.y += 0.0001 * speedMultiplier; starsMid.rotation.y += 0.0003 * speedMultiplier;
                    if (warpSpeed > 0.1) { starsFront.position.z += warpSpeed * 5; if (starsFront.position.z > 200) starsFront.position.z = -200; starsMid.position.z += warpSpeed * 2; if (starsMid.position.z > 200) starsMid.position.z = -200; }
                    if (bbActive) { const p = bigBangSys.geometry.attributes.position.array; let active = false; for (let i = 0; i < bbCount; i++) { p[i * 3] += bbVel[i].x; p[i * 3 + 1] += bbVel[i].y; p[i * 3 + 2] += bbVel[i].z; } bigBangSys.geometry.attributes.position.needsUpdate = true; if (bbMat.opacity <= 0.01) bbActive = false; }
                    meteors.forEach(m => m.update());

                    if (!document.getElementById('projects-layer').classList.contains('hidden')) {
                        // Projects mode camera logic
                    } else {
                        camera.position.x += (targetCamX - camera.position.x) * 0.05;
                        camera.position.y += (targetCamY - camera.position.y) * 0.05;
                    }
                    camera.lookAt(scene.position);
                    renderer.render(scene, camera);
                }
                animate();
                window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });

                // --- IMPROVED INITIALIZATION ---
                const scrambler = new TextScramble(document.getElementById('bio-text'));
                document.getElementById('bio-text').innerText = langData[currentLang].bio;

                setTimeout(() => {
                    const loader = document.getElementById('loader');
                    loader.style.opacity = '0';
                    setTimeout(() => {
                        loader.remove();
                        triggerBigBang();
                        setTimeout(() => {
                            document.getElementById('home-layer').classList.add('active');
                            document.getElementById('hud-nav').classList.add('visible');
                        }, 2500);
                    }, 500);
                }, 2500);

                window.toggleProfile = function (show) {
                    const mod = document.getElementById('profile-module');
                    const layers = document.querySelectorAll('.full-layer'); // Use generic class for any layer
                    const bars = document.querySelectorAll('.skill-fill');
                    if (show) {
                        mod.classList.add('active');
                        layers.forEach(el => el.classList.add('blurred'));
                        gsap.to(camera.position, { z: 20, duration: 1.5, ease: "power2.inOut" });
                        scrambler.setText(langData[currentLang].bio);
                        bars.forEach(b => b.style.width = b.getAttribute('data-width'));
                    } else {
                        mod.classList.remove('active');
                        layers.forEach(el => el.classList.remove('blurred'));
                        gsap.to(camera.position, { z: 60, duration: 1.5, ease: "power2.inOut" });
                        bars.forEach(b => b.style.width = '0%');
                    }
                }
            </script>
</body>

</html>